<!DOCTYPE html>
<html lang='en' type="module">

<head>
  <base href=".">
  <meta charset='UTF-8'>
  <title>Orb | Simple graph with custom default style on default canvas</title>
  <script type="text/javascript" src="./orb.js"></script>
</head>
<style>
  html,
  body {
    height: 100%;
    margin: 0;
  }
</style>

<body>
  <div style="display: flex; flex-direction: column; align-items: center; height: 100%;">
    <h1>Example 2 - Basic + Custom default style</h1>
    <p style="width: 70%">
      Renders a simple graph with a custom default style (color, size, border, text) for nodes and edges.
    </p>

    <!--
      Make sure that your graph container has a defined width and height.
      Orb will expand to any available space, but won't be visible if it's parent container is collapsed.
    -->
    <div id='graph' style="flex: 1; width: 100%;"></div>
  </div>
  <script type="text/javascript">
    const container = document.getElementById('graph');

    const nodes = [
      { id: 0, label: 'Node A' },
      { id: 1, label: 'Node B - A Special Node\nWith Some Special\nProperties' },
      { id: 2, label: 'Node C' },
    ];
    const edges = [
      { id: 0, start: 0, end: 0, label: 'A -> A' },
      { id: 1, start: 0, end: 1, label: 'A -> B' },
      { id: 2, start: 0, end: 2, label: 'New Property\nA -> C' },
      { id: 3, start: 1, end: 2, label: 'B -> C' },
      { id: 4, start: 2, end: 2, label: 'C -> C' },
      { id: 5, start: 0, end: 1, label: 'A -> B' },
    ]

    const orb = new Orb.Orb(container);
    orb.view.setSettings({
      render: {
        backgroundColor: '#DDDDDD',
      },
    });

    // Assign a basic style
    orb.data.setDefaultStyle({
      getNodeStyle(node) {
        const basicStyle = {
          borderColor: '#1d1d1d',
          borderWidth: 0.1,
          color: '#DD2222',
          colorHover: '#e7644e',
          colorSelected: '#e7644e',
          fontSize: 3,
          label: node.data.label,
          size: 6,
        };

        if (node.data.id === 1) {
          return {
            ...basicStyle,
            size: 4,
            borderWidth: 0.3,
            color: '#00FF2B',
            borderColor: "purple",
            zIndex: 1,
            fontBackgroundColor: 'rgb(0, 255, 0)',
            fontBackgroundBorderWidth: 0.3,
            fontBackgroundBorderColor: 'purple',
            fontBackgroundBorderRadius: 1.5,
            fontBackgroundPadding: 1,
            fontSize: 1.5,
          };
        }

        return {
          ...basicStyle
        };
      },
      getEdgeStyle(edge) {
        const basicStyles = {
          color: '#999999',
          colorHover: '#1d1d1d',
          colorSelected: '#1d1d1d',
          fontSize: 2,
          width: 0.3,
          widthHover: 0.9,
          widthSelected: 0.9,
          label: edge.data.label,
        }

        if (edge.data.id === 2) {
          return {
            ...basicStyles,
            fontBackgroundColor: 'rgb(0, 255, 0)',
            fontBackgroundBorderWidth: 0.2,
            fontBackgroundBorderColor: 'grey',
            fontBackgroundBorderRadius: 10,
            fontBackgroundPadding: 1,
            fontSize: 1.5,
          }
        }

        else return { ...basicStyles };
      },
    });

    // Initialize nodes and edges
    orb.data.setup({ nodes, edges });

    orb.view.render(() => {
      orb.view.recenter();
    });


  </script>
</body>

</html>