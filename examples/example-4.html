<!DOCTYPE html>
<html lang='en' type="module">
<head>
  <base href=".">
  <meta charset='UTF-8'>
  <title>Orb | 4</title>
  <script type="text/javascript" src="./bundle.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css" integrity="sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ==" crossorigin="" />
</head>
<style>
  html, body {
    height: 100%;
    margin: 0;
  }
</style>
<body>
  <div style="display: flex; flex-direction: column; align-items: center; height: 100%;">
    <h1>Example 4</h1>
    <p>Rendering a simple graph on default canvas with events and callbacks (events)</p>

    <div id='graph' style="flex: 1; width: 100%;"></div>
  </div>
  <script type="text/javascript">
    const container = document.getElementById('graph');

    const n = 300;
    nodes = new Array(n);
    edges = new Array(n);
    for (let i = 0; i < n; i++) {
      nodes[i] = {
        id: i,
        labels: [`Node ${i}`],
      };
      edges[i] = {
        id: i,
        start: Math.floor(Math.sqrt(i)),
        end: i + 1,
      };
    }

    const orb = new Orb.Orb(container);
    orb.setView((context) => new Orb.DefaultView(context));

    // Initialize nodes and edges
    orb.data.setup({ nodes, edges });

    // Assign a basic style
    orb.data.setStyle({
      getNodeStyle(node) {
        return {
          borderColor: '#1d1d1d',
          borderWidth: 0.6,
          color: '#DD2222',
          colorHover: '#e7644e',
          colorSelected: '#e7644e',
          fontSize: 3,
          label: node.data.labels[0],
          size: 6,
        };
      },
      getEdgeStyle(edge) {
        return {
          color: '#999999',
          colorHover: '#1d1d1d',
          colorSelected: '#1d1d1d',
          fontSize: 3,
          width: 0.3,
          widthHover: 0.9,
          widthSelected: 0.9,
          label: edge.data.label,
        };
      },
    });

    // Render and recenter the view
    orb.view.render(() => {
      orb.view.recenter();
    });

    orb.events.on('simulation-step', () => {
      orb.view.render();
    })

    orb.events.on('node-click', (node) => {
      console.log('Event: node-click', node);
    })
    orb.events.on('node-hover', (node) => {
      console.log('Event: node-hover', node);
    });
    orb.events.on('edge-click', (edge) => {
      console.log('Event: edge-click', edge);
    });

  </script>
</body>
</html>
